#include<iostream>
#include<stdio.h>
#include<pthread.h>
using namespace std;
pthread_t p1,p2;
pthread_mutex_t lock;
int counter=0;
void *inc(void *a)
{
pthread_mutex_lock(&lock);
counter=counter+2;
pthread_mutex_unlock(&lock);
cout<<"counter="<<counter<<endl;
}
void *dec(void *a)
{
pthread_mutex_lock(&lock);
counter--;
pthread_mutex_unlock(&lock);
cout<<"counter="<<counter<<endl;
}
int main()
{
char a='a';
char b='b';
pthread_create(&p2,NULL,&inc,&a);
pthread_create(&p1,NULL,&dec,&b);
pthread_join(p1,NULL);
pthread_join(p2,NULL);
}