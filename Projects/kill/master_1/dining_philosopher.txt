#include<iostream>
#include<pthread.h>
#include<semaphore.h>
#include<stdio.h>
using namespace std;
sem_t cstick[6];
pthread_t p[6];
void *fun(void *a)
{
int j=(int)a;
cout<<"phiosopher "<<j<<"thinking"<<endl;
sem_wait(&cstick[j]);
sem_wait(&cstick[(j+1)%5]);
cout<<"phiosopher "<<j<<"eating"<<endl;
sem_post(&cstick[(j+1)%5]);
sem_post(&cstick[j]);
pthread_exit(0);
}

int main()
{
int i;
for(i=1;i<=5;i++)
sem_init(&cstick[i],0,1);
for(i=5;i>=1;i--)
pthread_create(&p[i],NULL,fun,(void*)i);
for(i=1;i<=5;i++)
pthread_join(p[i],NULL);
}